{% extends "base/layout.html" %}

{% block title %}Perfil de Usuario{% endblock %}

{% block content %}

<div class="profile-slider-container grid-container">
    <aside class="profile-sidebar">
        <!-- Información del usuario -->
        <div class="user-info">
            <img src="https://imgmedia.larepublica.pe/640x959/larepublica/original/2025/01/07/677d743f33031862432cca4d.webp"
                alt="Foto de perfil" class="user-avatar">
            <div class="user-details">
                <h3 class="user-name">{{ user.nombre if user else 'Usuario' }}</h3>
                <p class="user-email">{{ user.correo if user else 'correo@ejemplo.com' }}</p>
            </div>
        </div>
        <!-- Menú de opciones -->
        <nav class="profile-nav">
            <ul>
                <li class="nav-item active" data-section="username">
                    <i class="icon-user"></i>
                    <span>Perfil</span>
                </li>
                <li class="nav-item logout">
                    <a href="{{ url_for('auth.logout') }}">
                        <i class="icon-logout"></i>
                        <span>Cerrar sesión</span>
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <div class="profile-main main">
        <!-- Mostrar mensajes flash -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <div class="flash-messages">
            {% for category, message in messages %}
            <div class="flash-message flash-{{ category }}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}
        <!-- Sección Cambiar nombre de usuario (única sección activa) -->
        <div class="profile-section active" id="section-username">
            <div class="section-header">
                <div class="section-icon">
                    <i class="icon-user-large"></i>
                </div>
                <div class="section-info">
                    <h2>Perfil</h2>
                    <p>Cambiar nombre de usuario</p>
                    <small>Actualiza tu nombre de usuario</small>
                </div>
            </div>

            <form class="profile-form" method="POST" action="{{ url_for('profile.update_username') }}">
                <div class="form-group">
                    <label for="new-username">Ingresa tu nuevo nombre de usuario</label>
                    <input type="text" id="new-username" name="new_username" placeholder="Nuevo nombre de usuario"
                        class="form-input" required minlength="3" maxlength="50">
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Confirmar cambio</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}