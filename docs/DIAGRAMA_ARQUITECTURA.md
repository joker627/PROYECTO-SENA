# ๐๏ธ Diagrama de Arquitectura - PROYECTO SENA

## ๐ Arquitectura Completa del Sistema

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ๐ FRONTEND (Cliente)                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ Templates (Jinja2)  โ  ๐จ CSS  โ  โก JavaScript (Mรญnimo)  โ
โ  โข login.html           โ  โข Grid  โ  โข profile.js           โ
โ  โข register.html        โ  โข Flex  โ  โข script.js            โ
โ  โข profile/index.html   โ  โข Resp. โ  โข modos_traduccion.js  โ
โ  โข layout.html          โ         โ                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                โ๏ธ HTTP Requests
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   ๐ถ๏ธ FLASK APPLICATION                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                       ๐ main.py                           โ
โ              โข Configuraciรณn de la app                     โ
โ              โข Registro de Blueprints                      โ
โ              โข Gestiรณn de sesiones                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                โ๏ธ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   ๐ค๏ธ ROUTES (Blueprints)                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ auth/           โ  ๐ profile_routes.py โ  ๐ routes.py  โ
โ  โข /auth/login      โ  โข /profile/          โ  โข /          โ
โ  โข /auth/logout     โ  โข /profile/update-*  โ  โข /dashboard โ
โ  โข /auth/register   โ  โข /profile/change-*  โ               โ
โ                     โ  โข /profile/delete-*  โ               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                โ๏ธ Calls
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  ๐ฎ CONTROLLERS (Business Logic)           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ        AuthController        โ       ProfileController       โ
โ    โโโโโโโโโโโโโโโโโโโโโโโ   โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ    โ โข login_user()      โ   โ   โ โข get_user_profile()   โ โ
โ    โ โข logout_user()     โ   โ   โ โข update_username()    โ โ
โ    โ โข register_new_userโ   โ   โ โข update_email()       โ โ
โ    โ โข require_login()   โ   โ   โ โข change_password()    โ โ
โ    โ โข get_current_user()โ   โ   โ โข delete_account()     โ โ
โ    โโโโโโโโโโโโโโโโโโโโโโโ   โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                โ๏ธ Data Operations
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   ๐๏ธ MODELS (Data Access Layer)            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                      user_model.py                         โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ โข get_user_by_email()     โข update_user_username()     โ โ
โ  โ โข get_user_by_id()        โข update_user_email()        โ โ
โ  โ โข create_user()           โข verify_current_password()  โ โ
โ  โ โข get_all_roles()         โข change_user_password()     โ โ
โ  โ โข delete_user_account()   โข (Hash/Verify passwords)    โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                โ๏ธ SQL Queries
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ๐๏ธ DATABASE (MySQL)                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ     ๐ฅ usuarios                    ๐ญ roles                โ
โ  โโโโโโโโโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ id_usuario (PK)     โ      โ id_rol (PK)            โ   โ
โ  โ nombre              โโโโโโโโ nombre_rol             โ   โ
โ  โ correo (UNIQUE)     โ     โโ descripcion            โ   โ
โ  โ contrasena (HASHED) โ     โโ                        โ   โ
โ  โ fecha_registro      โ     โโ                        โ   โ
โ  โ id_rol (FK) โโโโโโโโโผโโโโโโโ                        โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

## ๐ Flujo de Datos Detallado

### 1. ๐ค Peticiรณn de Login
```
Usuario โ login.html โ /auth/login โ AuthController.login_user() 
    โ
UserModel.get_user_by_email() โ MySQL โ Verificaciรณn โ Sesiรณn
    โ
Respuesta โ Flash Message โ Redirect โ Dashboard
```

### 2. ๐ค Gestiรณn de Perfil
```
Usuario โ profile/index.html โ /profile/update-username โ ProfileController
    โ
require_login() โ update_username() โ UserModel.update_user_username()
    โ
MySQL UPDATE โ Success/Error โ Flash Message โ Redirect
```

### 3. ๐ Cambio de Contraseรฑa
```
Formulario โ /profile/change-password โ ProfileController.change_password()
    โ
Validaciones โ verify_current_password() โ change_user_password()
    โ
bcrypt.hash() โ MySQL UPDATE โ Session Update โ Response
```

## ๐๏ธ Principios de Arquitectura Aplicados

### ๐ฏ Single Responsibility Principle (SRP)
- **Routes**: Solo manejan HTTP requests/responses
- **Controllers**: Solo lรณgica de negocio
- **Models**: Solo acceso a datos
- **Templates**: Solo presentaciรณn

### ๐ Dependency Inversion Principle (DIP)
- **Controllers** dependen de abstracciones (Models)
- **Routes** dependen de abstracciones (Controllers)
- **Fรกcil testing** y mantenimiento

### ๐ฆ Separation of Concerns
- **Presentaciรณn**: Templates + CSS + JS
- **Lรณgica**: Controllers
- **Datos**: Models + Database
- **Configuraciรณn**: Config files

## ๐ก๏ธ Flujo de Seguridad

```
โโโโโโโโโโโโโโโโโโโ    ๐ Hash     โโโโโโโโโโโโโโโโโโโ
โ   Password      โโโโโโโโโโโโโโโ  โ   bcrypt.hash   โ
โ   Plaintext     โ                โ   (Stored)      โ
โโโโโโโโโโโโโโโโโโโ                โโโโโโโโโโโโโโโโโโโ
         โ                                   โ
    ๐ Login                            ๐พ Register
         โ                                   โ
โโโโโโโโโโโโโโโโโโโ    โ Compare   โโโโโโโโโโโโโโโโโโโ
โ bcrypt.checkpw  โโโโโโโโโโโโโโโโ  โ   User Input    โ
โ (Verification)  โ                 โ   + Hash DB     โ
โโโโโโโโโโโโโโโโโโโ                 โโโโโโโโโโโโโโโโโโโ
         โ
    ๐ซ Session Created
         โ
    ๐ก๏ธ Protected Routes
```

## ๐ฑ Responsive Design Structure

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ฑ Mobile (< 768px)    โ ๐ป Desktop     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โข Stack layout        โ โข Grid layout  โ
โ  โข Collapsible menu    โ โข Sidebar      โ
โ  โข Touch-friendly      โ โข Hover states โ
โ  โข Single column       โ โข Multi-column โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

*๐๏ธ Esta arquitectura garantiza:*
- โ **Escalabilidad** - Fรกcil agregar nuevas funcionalidades
- โ **Mantenibilidad** - Cรณdigo organizado y separado
- โ **Testabilidad** - Componentes independientes
- โ **Seguridad** - Mejores prรกcticas implementadas
- โ **Performance** - Estructura optimizada